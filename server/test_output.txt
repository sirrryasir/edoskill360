$ jest
  console.log
    [SIMULATION] ðŸ“§ Sending verification request to boss@corp.com (WhatsApp/Email)...

      at requestReferenceVerification (src/controllers/verificationController.ts:128:17)

  console.log
    [SIMULATION] âœ… Message sent! Now waiting for Agent Approval.

      at requestReferenceVerification (src/controllers/verificationController.ts:129:17)

PASS tests/job.test.ts (9.121 s)
  Job Endpoints
    Job Workflow
      âœ“ should allow employer to create a job and verify it exists (223 ms)
      âœ“ should prevent talents from creating jobs (145 ms)

PASS tests/agent.test.ts (9.244 s)
  Agent Endpoints
    âœ“ should allow agent to view and approve verification requests (860 ms)

FAIL tests/application.test.ts (9.276 s)
  Job Application Endpoints
    Application Flow
      âœ• should allow talent to apply for a job and employer to view it (565 ms)

  â— Job Application Endpoints â€º Application Flow â€º should allow talent to apply for a job and employer to view it

    expect(received).toEqual(expected) // deep equality

    Expected: 201
    Received: 500

      62 |                     resumeLink: 'http://resume.com'
      63 |                 });
    > 64 |             expect(applyRes.statusCode).toEqual(201);
         |                                         ^
      65 |             expect(applyRes.body.status).toEqual('pending');
      66 |
      67 |             // 4. Verify duplicate application fails

      at Object.<anonymous> (tests/application.test.ts:64:41)

PASS tests/verification.test.ts (9.241 s)
  Verification Endpoints
    âœ“ should handle identity verification flow (455 ms)
    âœ“ should handle reference verification request (220 ms)

PASS tests/auth.test.ts (9.514 s)
  Auth Endpoints
    POST /api/auth/register
      âœ“ should register a new user successfully (465 ms)
      âœ“ should return 400 if user already exists (195 ms)
    POST /api/auth/login
      âœ“ should login successfully with correct credentials (264 ms)
      âœ“ should fail with incorrect password (248 ms)

PASS tests/user.test.ts (9.679 s)
  User Endpoints
    GET /api/users/profile
      âœ“ should return the logged in user profile (454 ms)
      âœ“ should fail without auth token (144 ms)
    PUT /api/users/profile
      âœ“ should update user profile fields (165 ms)
      âœ“ should not update restricted fields directly if prevented (checking role) (132 ms)
    GET /api/users/:id
      âœ“ should get public user profile without auth (127 ms)

Test Suites: 1 failed, 5 passed, 6 total
Tests:       1 failed, 14 passed, 15 total
Snapshots:   0 total
Time:        11.164 s, estimated 16 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
error: script "test" exited with code 1
